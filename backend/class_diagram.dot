// Kiosk Management System Class Diagram
digraph {
	bgcolor=white rankdir=TB splines=ortho
	node [fontname=Arial shape=record style=filled]
	edge [fontname=Arial fontsize=10]
	subgraph cluster_models {
		color=lightblue label="Models (Pydantic)" style=filled
		ProductOption [label="<<Model>>\nProductOption|+ name: str\l+ value: str\l+ price_modifier: float\l" fillcolor="#E3F2FD"]
		Product [label="<<Model>>\nProduct|+ product_id: str\l+ name: str\l+ price: float\l+ description: Optional[str]\l+ category: Optional[str]\l+ available: bool\l+ options: List[ProductOption]\l" fillcolor="#E3F2FD"]
		Kiosk [label="<<Model>>\nKiosk|+ kiosk_id: str\l+ location: str\l+ name: str\l+ status: str\l+ products: List[str]\l+ created_at: datetime\l+ updated_at: datetime\l" fillcolor="#E3F2FD"]
		TransactionItem [label="<<Model>>\nTransactionItem|+ product_id: str\l+ product_name: str\l+ quantity: int\l+ unit_price: float\l+ subtotal: float\l" fillcolor="#E3F2FD"]
		Transaction [label="<<Model>>\nTransaction|+ transaction_id: str\l+ kiosk_id: str\l+ items: List[TransactionItem]\l+ total_amount: float\l+ payment_method: str\l+ payment_status: str\l+ timestamp: datetime\l+ receipt_number: str\l" fillcolor="#E3F2FD"]
		AdminStats [label="<<Model>>\nAdminStats|+ total_kiosks: int\l+ total_products: int\l+ total_transactions: int\l+ total_revenue: float\l+ top_products: List[Dict]\l" fillcolor="#E3F2FD"]
	}
	subgraph cluster_services {
		color=lightgreen label=Services style=filled
		FirebaseService [label="<<Service>>\nFirebaseService|- db: Firestore\l|+ initialize()\l+ get_all_kiosks()\l+ get_kiosk_by_id()\l+ create_kiosk()\l+ update_kiosk()\l+ get_all_products()\l+ create_product()\l+ get_all_transactions()\l+ create_transaction()\l" fillcolor="#C8E6C9"]
		PaymentService [label="<<Service>>\nPaymentService|- api_key: str\l- api_secret: str\l|+ initialize_payment()\l+ confirm_payment()\l+ cancel_payment()\l+ refund_payment()\l+ get_payment_status()\l" fillcolor="#C8E6C9"]
	}
	subgraph cluster_routes {
		color=lightyellow label="Routes (FastAPI)" style=filled
		KioskRouter [label="<<Router>>\nKioskRouter|+ GET /kiosks\l+ GET /kiosks/{id}\l+ POST /kiosks\l+ PUT /kiosks/{id}\l+ DELETE /kiosks/{id}\l" fillcolor="#FFF9C4"]
		ProductRouter [label="<<Router>>\nProductRouter|+ GET /products\l+ GET /products/{id}\l+ POST /products\l+ PUT /products/{id}\l+ DELETE /products/{id}\l" fillcolor="#FFF9C4"]
		TransactionRouter [label="<<Router>>\nTransactionRouter|+ GET /transactions\l+ POST /transactions\l+ POST /{id}/confirm\l+ POST /{id}/cancel\l+ POST /{id}/refund\l" fillcolor="#FFF9C4"]
		AdminRouter [label="<<Router>>\nAdminRouter|+ GET /admin/stats\l+ GET /admin/revenue\l+ GET /admin/dashboard\l" fillcolor="#FFF9C4"]
	}
	subgraph cluster_utils {
		color=lightpink label=Utilities style=filled
		Helpers [label="<<Util>>\nHelpers|+ generate_unique_id()\l+ generate_receipt_number()\l+ format_datetime()\l+ calculate_total()\l+ validate_payment_method()\l+ format_currency()\l" fillcolor="#F8BBD0"]
	}
	FastAPIApp [label="FastAPIApp|+ app: FastAPI\l|+ startup_event()\l+ shutdown_event()\l+ root()\l+ health_check()\l" fillcolor="#FFCCBC"]
	Product -> ProductOption [label=contains arrowhead=diamond style=dashed]
	Transaction -> TransactionItem [label=contains arrowhead=diamond style=dashed]
	Transaction -> Kiosk [label="at location" style=dashed]
	FirebaseService -> Kiosk [label=manages color=darkgreen style=dotted]
	FirebaseService -> Product [label=manages color=darkgreen style=dotted]
	FirebaseService -> Transaction [label=manages color=darkgreen style=dotted]
	PaymentService -> Transaction [label=processes color=darkgreen style=dotted]
	KioskRouter -> FirebaseService [label=uses color=blue style=dashed]
	ProductRouter -> FirebaseService [label=uses color=blue style=dashed]
	TransactionRouter -> FirebaseService [label=uses color=blue style=dashed]
	TransactionRouter -> PaymentService [label=uses color=blue style=dashed]
	AdminRouter -> FirebaseService [label=uses color=blue style=dashed]
	KioskRouter -> Kiosk [label=returns color=purple style=dotted]
	ProductRouter -> Product [label=returns color=purple style=dotted]
	TransactionRouter -> Transaction [label=returns color=purple style=dotted]
	AdminRouter -> AdminStats [label=returns color=purple style=dotted]
	FastAPIApp -> KioskRouter [label=includes color=red style=solid]
	FastAPIApp -> ProductRouter [label=includes color=red style=solid]
	FastAPIApp -> TransactionRouter [label=includes color=red style=solid]
	FastAPIApp -> AdminRouter [label=includes color=red style=solid]
	FastAPIApp -> FirebaseService [label=initializes color=red style=solid]
}
